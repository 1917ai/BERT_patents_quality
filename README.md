# 命令
中国1985-2024年的专利数据库均为.xlsx文件，直接应年份命名，例如1985。

第1列patent_type为专利类别，有“发明授权”、“发明公开”、“实用新型”、“外观设计”4种；

第2列patent_apply_num为编号；

第5列patent_apply_publish_date，只有发明公开有，别的都是空值；

第7列patent_authorization_date只有发明公开没有，别的3类专利都有；

以上3个日期数据的格式都如1989-05-10；

第19列principal_claim为权利要求书；

第21列abstract为摘要；

第23列name为专利名称；

第一行为表头。

对于每一个专利，将第19，21列的文本进行提取、分词，生成一个字典，键为不同的词语，值为该词在这两段文字中的频数。分词的时候注意去掉标点和数字。对于两段文字皆为空的观测值，进行剔除。

专利的的时间，发明公开以patent_apply_publish_date为准，其余以patent_authorization_date为准。

对这个字典进行变换：值变为该词出现频率与ln(该时间之前的所有专利数/该时间之前包含该词的专利数+1）之积，加1是为了防止除以0。

对于两个不同的专利，将这两个向量的维数缩减为两个专利所有相同的词的个数。然后，将这个向量单位化。然后，将这两个向量做内积（即对于相同的键，求值之积），这是两个专利的相似度。

鉴于目前的算法，同时间的专利之间不存在相似度。

这样，就生成了一个专利相似度矩阵，是非负对称阵。

最后，定义专利质量：（与所有以后时间的专利的相似度之和）/（与所有以前时间的专利的相似度之和）。

因此，在数据库中，第一个和最后一个专利都没有专利质量。

输出每个专利的质量，保存为一个csv文件，3列：专利编号，时间，质量。

# 问题
数据库不全，每年仅有100条数据，且没有说明书，只有权利声明与摘要

区分发明专利、专利授权、外观专利、实用新型

# 又用bert试验了以上计算“质量”的思想
结果截然不同：bert的高质量专利，近些年居多，同时专利间的质量差异不大；而词频统计的结果，高质量专利80年代的居多

其次，bert尚未微调，这是下一步工作的内容

另外，考虑使用中文处理性能优于传统bert的工具
